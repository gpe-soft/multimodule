<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>multimodule</artifactId>
        <groupId>nl.gpesoft</groupId>
        <version>1.0</version>
    </parent>

    <artifactId>hosting</artifactId>
    <packaging>pom</packaging>

    <name>${project.artifactId}</name>

    <properties>
        <wildfly.version>10.1.0.Final</wildfly.version>
    </properties>

    <profiles>
        <!--<profile>-->
            <!--<id>prepare-wildfly-properties</id>-->
            <!--<build>-->
                <!--<plugins>-->
                    <!--<plugin>-->
                        <!--<groupId>org.apache.maven.plugins</groupId>-->
                        <!--<artifactId>maven-resources-plugin</artifactId>-->
                        <!--<executions>-->
                            <!--<execution>-->
                                <!--<id>copy-application-config</id>-->
                                <!--<phase>generate-resources</phase>-->
                                <!--<goals>-->
                                    <!--<goal>copy-resources</goal>-->
                                <!--</goals>-->
                                <!--<configuration>-->
                                    <!--<outputDirectory>wildfly/server/wildfly-${wildfly.version}/modules/system/layers/base/nl/kvk/properties/configuration/main</outputDirectory>-->
                                    <!--<resources>-->
                                        <!--<resource>-->
                                            <!--<directory>../hr-communicatie-service-resource/build/template/config/application</directory>-->
                                            <!--<filtering>true</filtering>-->
                                        <!--</resource>-->
                                        <!--<resource>-->
                                            <!--<directory>build/template/config/application</directory>-->
                                        <!--</resource>-->
                                    <!--</resources>-->
                                <!--</configuration>-->
                            <!--</execution>-->
                        <!--</executions>-->
                    <!--</plugin>-->
                    <!--<plugin>-->
                        <!--<artifactId>maven-clean-plugin</artifactId>-->
                        <!--<configuration>-->
                            <!--<filesets>-->
                                <!--<fileset>-->
                                    <!--<directory>wildfly/server/wildfly-${wildfly.version}/modules/system/layers/base/nl/kvk/properties/configuration/main</directory>-->
                                    <!--<includes>-->
                                        <!--<include>**/*</include>-->
                                    <!--</includes>-->
                                <!--</fileset>-->
                            <!--</filesets>-->
                        <!--</configuration>-->
                    <!--</plugin>-->
                <!--</plugins>-->
                <!--<filters>-->
                    <!--<filter>build/profile/application.properties</filter>-->
                <!--</filters>-->
            <!--</build>-->
        <!--</profile>-->

        <profile>
            <id>install-wildfly</id>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-clean-plugin</artifactId>
                        <configuration>
                            <filesets>
                                <fileset>
                                    <directory>wildfly</directory>
                                    <includes>
                                        <include>resource/**/*</include>
                                        <include>server/**/*</include>
                                    </includes>
                                </fileset>
                            </filesets>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>install-wildfly</id>
                                <phase>initialize</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>org.wildfly</groupId>
                                            <artifactId>wildfly-dist</artifactId>
                                            <version>${wildfly.version}</version>
                                            <type>zip</type>
                                            <overWrite>true</overWrite>
                                            <outputDirectory>wildfly/server</outputDirectory>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy</id>
                                <phase>generate-resources</phase>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>wildfly/resource</outputDirectory>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>com.ibm.db2</groupId>
                                            <artifactId>db2jcc4</artifactId>
                                            <version>4.13.80</version>
                                            <overWrite>true</overWrite>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!--<plugin>-->
                        <!--<groupId>org.apache.maven.plugins</groupId>-->
                        <!--<artifactId>maven-resources-plugin</artifactId>-->
                        <!--<executions>-->
                            <!--<execution>-->
                                <!--<id>copy-cli</id>-->
                                <!--<phase>generate-resources</phase>-->
                                <!--<goals>-->
                                    <!--<goal>copy-resources</goal>-->
                                <!--</goals>-->
                                <!--<configuration>-->
                                    <!--<outputDirectory>wildfly/cli</outputDirectory>-->
                                    <!--<resources>-->
                                        <!--<resource>-->
                                            <!--<directory>build/template/cli</directory>-->
                                            <!--<filtering>true</filtering>-->
                                        <!--</resource>-->
                                    <!--</resources>-->
                                <!--</configuration>-->
                            <!--</execution>-->
                        <!--</executions>-->
                    <!--</plugin>-->
                    <!--<plugin>-->
                        <!--<groupId>org.wildfly.plugins</groupId>-->
                        <!--<artifactId>wildfly-maven-plugin</artifactId>-->
                        <!--<configuration>-->
                            <!--<jboss-home>wildfly/server/wildfly-${wildfly.version}</jboss-home>-->
                            <!--<add-user>-->
                                <!--<users>-->
                                    <!--<user>-->
                                        <!--<username>su</username>-->
                                        <!--<password>pass_su</password>-->
                                        <!--<groups>-->
                                            <!--<group>superuser</group>-->
                                        <!--</groups>-->
                                        <!--<application-user>true</application-user>-->
                                        <!--<realm>ApplicationRealm</realm>-->
                                    <!--</user>-->
                                <!--</users>-->
                            <!--</add-user>-->
                            <!--<scripts>-->
                                <!--<script>wildfly/cli/commands.cli</script>-->
                            <!--</scripts>-->
                        <!--</configuration>-->
                    <!--</plugin>-->

                </plugins>
                <filters>
                    <filter>build/server.properties</filter>
                </filters>
            </build>
        </profile>
    </profiles>

</project>